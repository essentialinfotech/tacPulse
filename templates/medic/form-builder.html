{% extends '../base.html' %} {% load static %} {% block content %}
<div class="content d-flex flex-column flex-column-fluid" id="kt_content">
    <!--begin::Entry-->
    <div class="d-flex flex-column-fluid">
        <!--begin::Container-->
        <div class="container">

            <form action="" method="post" id="form" enctype="multipart/form-data">
                {% csrf_token %}
                <input type="text" class="form-control" id="id_title" placeholder="Please enter form title">
                <div name="formBuilder" id="formBuilder"></div>
            </form>

            <button type="submit" onclick="submit()" class="btn btn-primary">Save Form</button>
        </div>
    </div>
</div>

{% endblock %} {% block js %}
<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.js " integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin=" anonymous "></script>
<!-- Core -->
<script src="{% static 'package/dist/form-builder.min.js' %} "></script>
<!-- Render form templates created with formBuilder -->
<script src="{% static 'package/dist/form-render.min.js' %} "></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js "></script>

<script>
    var form = $('#formBuilder').formBuilder();

    function submit() {
        // Collect form data
        var json = form.formData
        var title = $("#id_title").val()
            // Send data to server
        $.ajax({
            url: "{% url 'form_builder' %}",
            data: {
                'json': json,
                'title': title
            },
            success: function(data) {
                alert("saved")
            }
        })
    }
</script>
{% endblock %}